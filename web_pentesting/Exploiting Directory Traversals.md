
This type of attack can be used to access sensitive files on a web server and typically occurs when a web application is not sanitizing user input.

In Linux systems, the **/var/www/html/** directory is often used as the web root. 

When a web application displays a page, **http://example.com/file.html** for example, it will try to access **/var/www/html/file.html**.The http link doesn't contain any part of the path except the filename because the web root also serves as a base directory for a web server

Directory traversal vulnerabilities are mostly used for gathering information. As mentioned before, if we can access certain files containing sensitive information, like passwords or keys, it may lead to system access.

---
example of the vulnerability in a php app:

when we open **mountaindesserts.com/meteor/admin.php** in our browser, we'll notice the same message that was shown on the **index.php** page after clicking the "Admin" link.

we can now try and do:
```
http://mountaindesserts.com/meteor/index.php?page=../../../../../../../../../etc/passwd
```

it shows the contents of **/etc/passwd**. We successfully leveraged the directory traversal vulnerability by using a relative path.

we should always check for the existence of SSH keys and their access permissions.

```
http://mountaindesserts.com/meteor/index.php?page=../../../../../../../../../home/offsec/.ssh/id_rsa
```

This example shows the private key

Let's copy the SSH private key beginning at **-----BEGIN OPENSSH PRIVATE KEY-----** and ending at **-----END OPENSSH PRIVATE KEY-----**

paste it into a file called **dt_key** in the home directory for the _kali_ user

```
ssh -i dt_key -p 2222 offsec@mountaindesserts.com
```

** Note - we'll need to modify the permissions of the **dt_key** file so that only the user / owner can read the file; if we don't, the _ssh_ program will throw an error stating that the access permissions are too open

---

** NOTE we should not rely on a browser for testing. Browsers often try to parse or optimize elements for user friendliness. When performing web application testing, we should mainly use tools such as _Burp_,[3](https://portal.offsec.com/courses/pen-200-44065/learning/common-web-application-attacks-44643/directory-traversal-44690/identifying-and-exploiting-directory-traversals-44650#fn-local_id_225-3) _cURL_,[4](https://portal.offsec.com/courses/pen-200-44065/learning/common-web-application-attacks-44643/directory-traversal-44690/identifying-and-exploiting-directory-traversals-44650#fn-local_id_225-4) or a programming language of our choice

example:
```
curl http://mountaindesserts.com/meteor/index.php?page=../../../../../../../../../home/offsec/.ssh/id_rsa
```

### Windows

On Windows, we can use the file **C:\Windows\System32\drivers\etc\hosts** to test directory traversal vulnerabilities, which is readable by all local users

Windows uses backslashes instead of forward slashes for file paths. Therefore, **..\** is an important alternative to **../** on Windows targets

we should always try to leverage both forward slashes and backslashes when examining a potential directory traversal vulnerability in a web application running on Windows

example:
 system is running the _Internet Information Services_ (IIS)[5](https://portal.offsec.com/courses/pen-200-44065/learning/common-web-application-attacks-44643/directory-traversal-44690/identifying-and-exploiting-directory-traversals-44650#fn-local_id_225-5) web server
 the logs are located at **C:\inetpub\logs\LogFiles\W3SVC1\**
 Another file we should always check when the target is running an IIS web server is **C:\inetpub\wwwroot\web.config**, which may contain sensitive information like passwords or usernames
